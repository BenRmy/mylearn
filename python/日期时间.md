# 日期时间处理

## datatime--基础日期/时间数据类型

该datetime模块导出以下常量：

+ datetime.MINYEAR：一个date或一个datetime对象中允许的最小年份数。MINYEAR是1。
+ datetime.MAXYEAR：一个date或一个datetime对象中允许的最大年份数。MAXYEAR是9999。

可用类：

+ datetime.date: 是指年月日构成的日期(相当于日历)
+ datetime.time: 是指时分秒微秒构成的一天24小时中的具体时间(相当于手表)
+ datetime.datetime: 上面两个合在一起，既包含时间又包含日期
+ datetime.timedelta: 时间间隔对象(timedelta)。一个时间点(datetime)加上一个时间间隔(timedelta)可以得到一个新的时间点(datetime)。同理，两个时间点相减会得到一个时间间隔。主要做时间的加减法用。
+ datetime.tzinfo：时区信息对象的抽象基类。这些datetime和time类用于提供可定制的时间调整概念（例如考虑时区和/或夏令时）。
+ datetime.timezone：将tzinfo抽象基类实现为与UTC的固定偏移量的类。

主要是前四个类，下面介绍datetime.date类，其他类的用法相似：

```python
import datetime
import time

today = datetime.date.today()
print(today)
t = datetime.date(2019, 8, 15)
print(t)
# 格式化
print(today.strftime('%Y-%m-%d %H:%M:%S'))
# 转成struct_time格式，这样传递给time.mktime(t)后，直接转成时间戳格式
print(today.timetuple())
print(time.mktime(today.timetuple()))
# 日期替换
print(today.replace(year=2013))
# 将时间戳转化为date对象
print(datetime.date.fromtimestamp(1408058729))
```

## time--时间的访问和转换

常用方法：

+ time.time()：返回当前时间的时间戳。
+ time.clock()：实际上是“处理器时间”。注意，在不同的系统上含义不同。在UNIX系统上，它返回的是“进程时间”，它是用秒表示的浮点数（时间戳）。而在WINDOWS中，第一次调用，返回的是进程运行的实际时间。而第二次之后的调用是自第一次调用以后到现在的运行时间。
+ time.sleep(secs)：线程推迟指定的时间后运行。
+ time.localtime([secs])：将一个时间戳转换成一个当前时区的struct_time，如果未提供secs参数时，按当前时间为准。
+ time.mktime(t)：将一个struct_time转换为时间戳。
+ time.strftime(format[, t])：将指定的struct_time(默认为当前时间)，根据指定的格式化字符串输出。t未指定，传入time.localtime()作为默认参数。
+ time.strptime(string[, format])：根据格式解析表示时间的字符串，将时间字符串转换为时间元组struct_time。

## calendar--日历相关模块

calendar模块文件里定义了很多类型，主要有Calendar，TextCalendar以及HTMLCalendar类型。其中，Calendar是TextCalendar与HTMLCalendar的基类。该模块文件还对外提供了很多方法，例如：calendar，month，prcal，prmonth之类。

+ class Calendar(object)：基础日历类。此类不进行任何格式化。它很简单，只向子类提供数据。
+ class TextCalendar(Calendar)：将日历输出为简单纯文本，类似于UNIX程序cal。
+ class HTMLCalendar(Calendar)：返回完整的HTML页面。

一些方法：

+ calendar.setfirstweekday(weekday)：设置每周的起始日期码。0（星期一）到6（星期日）。
+ calendar.firstweekday()：返回当前每周起始日期的设置。默认情况下，首次载入calendar模块时返回0，即星期一。
+ calendar.calendar(year,w=2,l=1,c=6)：返回一个多行字符串格式的year年日历，3个月一行，间隔距离为c。每日宽度间隔为w字符。每行长度为21* W+18+2* C。l是每星期行数。
+ calendar.isleap(year)：是闰年返回True，否则为false。
+ calendar.leapdays(y1,y2)：返回在Y1，Y2两年之间的闰年总数。
+ calendar.month(year,month,w=2,l=1)：返回一个多行字符串格式的year年month月日历，两行标题，一周一行。每日宽度间隔为w字符。每行的长度为7* w+6。l是每星期的行数。
+ calendar.monthcalendar(year,month)：返回一个整数的单层嵌套列表。每个子列表装载代表一个星期的整数。Year年month月外的日期都设为0;范围内的日子都由该月第几日表示，从1开始。
+ calendar.monthrange(year,month)：返回两个整数。第一个是该月的首日所在星期的日期码(0~6)，第二个是该月的天数(28-31)。
+ calendar.timegm(tupletime)：和time.gmtime相反，其接受一个时间元组形式，返回该时刻的时间辍（1970纪元后经过的浮点秒数）。
+ calendar.weekday(year,month,day)：返回给定日期的日期码。0（星期一）到6（星期日）。月份为 1（一月）到12（12月）。

## Arrow

提供了一种合理的，人性化的方法来创建，操作，格式化和转换日期，时间和时间戳。使用更少的导入和更少的代码来处理日期和时间。

+ arrow.now()：获取当前本地时间
+ arrow.utcnow()：获取当前UTC时间
+ arrow.get(timestamp)：将时间戳转化为arrow对象，其中时间戳可以是int，float或者可以转化为float的字符串
+ arrow.get(string[,format_string])：将字符串转换为arrow对象。如arrow.get('2018-02-24 12:30:45', 'YYYY-MM-DD HH:mm:ss')。注意遵循ISO-8601的字符串不需要格式字符串参数即可转换：arrow.get('2018-02-24T13:00:00.000-07:00')
+ arrow.get('June was born in May 1980', 'MMMM YYYY')：从字符串中通过格式参数搜索时间
+ arrow.get(2018, 2, 24)：直接创建arrow对象。arrow对象属性有datetime,timestamp,native,tzinfo。
+ arrow.shift(**kwargs)：时间推移，获取某个时间之前或之后的时间,关键字参数为years,months,weeks,days,hours，seconds，microseconds。
+ arrow.replace(**kwargs)：时间替换，返回一个被替换后的arrow对象，原对象不变
+ arrow.format([format_string])：格式化输出
+ arrow.humanize(locale)：人性化输出(xx之前、xx之后),locale参数可以指定地区语言
+ arrow.span(string), arrow.floor(), arrow.ceil()：时间范围和区间
